from torrserve.client import client

class Tracker:
    def Search(self, info):
        t=info['originaltitle']
        engine = client()
        items = engine.search(t)
        for item in items:
            sids = item['Seed']
            size = item['Size']
            title = item['Title']
            url = item['Magnet']

            yield { 'sids': sids, 'size': size, 'title': title, 'url': url }

    def Query(self, query):
        try:
            return [ item for item in self.Search({'originaltitle':query}) ]
        except Exception as e:
            print(e)
            return []
